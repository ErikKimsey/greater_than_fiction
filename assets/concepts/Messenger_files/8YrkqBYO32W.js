if (self.CavalryLogger) { CavalryLogger.start_js(["6YcA0"]); }

__d("BrowserExtensionsUtilities",["errorCode","URI","ads-lib-urllib","isFacebookURI","isMessengerDotComURI","isWorkplaceDotComURI","keyMirror"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={BROADCAST:"broadcast",CURRENT_THREAD:"current_thread"},i={GENERIC:"generic",MEDIA:"media",OPEN_GRAPH:"open_graph",PLACE_CARD:"place_card"},j={M_ME_DOMAIN:"m.me",FB_DOMAIN:"www.facebook.com"},k=b("keyMirror")({attachment:null}),l=b("keyMirror")({type:null,payload:null}),m=b("keyMirror")({preview_type:null,title:null,subtitle:null,image_url:null,item_url:null,open_graph_url:null,button_url:null,button_title:null,target_display:null,attachment_id:null,facebook_media_url:null,media_type:null});function n(a){return b("isFacebookURI")(a)||b("isMessengerDotComURI")(a)||b("isWorkplaceDotComURI")(a)}function a(){__p&&__p();var a=window.location.ancestorOrigins;if(a&&a.length>0){a=new(b("URI"))(a[a.length-1]);if(n(a))return a.getOrigin()}a=new(b("URI"))(window.location.href);a=a.getQueryData().fb_iframe_origin;a=a&&new(b("URI"))(a);if(a&&n(a))return a.getOrigin();if(/messenger/.test(window.name))return"https://www.messenger.com:443";else if(/instagram/.test(window.name))return"https://www.instagram.com:443";else return"https://www.facebook.com:443"}function c(a,c,d){__p&&__p();var e={};e[m.preview_type]="DEFAULT";if(!a){d(2071014,"Invalid MessageContent provided to SDK API call");return null}if(c!==h.BROADCAST&&c!==h.CURRENT_THREAD){d(2071021,"Invalid Sharing Type provided to SDK API call ");return null}c=a[k.attachment];if(!c){d(2071022,"Invalid attachment in MessageContent provided to SDK API call");return null}a=c[l.type];if(a!=="template"&&a!=="image"){d(2071023,"Invalid attachment type in MessageContent provided to SDK API call");return null}c=c[l.payload];if(!c){d(2071024,"Invalid payload in MessageContent provided to SDK API call");return null}if(a==="image"){a=c.url;if(!r(a,d))return null;e[m.image_url]=a;return e}a=c.template_type;c=c.elements;if(!c||!c instanceof Array||c.length>1){d(2071024,"Invalid payload elements in MessageContent provided to SDK API call");return null}c=c[0];var f=null;switch(a){case i.OPEN_GRAPH:e=o(c,e,d);if(e===null||e===void 0)return null;f=c.url;break;case i.GENERIC:e=p(c,e,d);if(e===null||e===void 0)return null;var g=c.default_action;if(g){if(g.type!=="web_url"||!g.url){d(2071024,"Invalid default action in MessageContent provided to SDK API call");return null}f=g.url;if(f&&typeof f!=="string"||f&&!b("ads-lib-urllib").isUrl(f)){d(2071024,"Invalid default_action URL provided in message content");return null}}e[m.item_url]=f;break;case i.MEDIA:e=q(c,e,d);if(e===null||e===void 0)return null;break;case i.PLACE_CARD:e=p(c,e,d);if(e===null||e===void 0)return null;break;default:d(2071024,"Invalid template type in MessageContent provided to SDK API call");return null}if(a===i.PLACE_CARD)return e;g=c.buttons;a=null;c=null;if(g){if(!(g instanceof Array)||g.length>1){d(2071024,"Invalid payload buttons in MessageContent provided to SDK API call");return null}g=g[0];var j=g.type;if(!j||j!=="web_url"){d(2071024,"Invalid button type in MessageContent provided to SDK API call");return null}a=g.title;if(!a){d(2071024,"Invalid payload button title in MessageContent provided to SDK API call");return null}c=g.url;if(c&&typeof c!=="string"||c&&!b("ads-lib-urllib").isUrl(c)){d(2071024,"Invalid button URL provided in message content");return null}}e[m.button_title]=a;e[m.button_url]=c;e[m.target_display]=s(a,c,f);return e}function o(a,c,d){a=a.url;if(typeof a!=="string"||!b("ads-lib-urllib").isUrl(a)){d(2071025,"Invalid open graph url provided in message content");return null}c[m.open_graph_url]=a;c[m.preview_type]="OPEN_GRAPH";c[m.item_url]=a;return c}function p(a,b,c){__p&&__p();var d=a.title;if(!d){c(2071024,"Invalid element title in MessageContent provided to SDK API call");return null}d=a.image_url;if(!r(d,c))return null;b[m.title]=a.title;b[m.subtitle]=a.subtitle;b[m.image_url]=a.image_url;return b}function q(a,c,d){__p&&__p();if(a.title||a.subtitle){d(2071024,"Invalid title/subtitle provided to MEDIA template");return null}var e=a.url,f=a.media_type;if(f!=="image"&&f!=="video"){d(2071024,"Invalid media type in Media Template");return null}if(e){if(!r(e,d))return null;d=b("ads-lib-urllib").getDomain(e);d===j.FB_DOMAIN?c[m.facebook_media_url]=a.url:c[m.image_url]=a.url;c[m.media_type]=f}a.attachment_id&&(c[m.attachment_id]=a.attachment_id);return c}function r(a,c){if(a&&typeof a!=="string"||a&&!b("ads-lib-urllib").isUrl(a)){c(2071017,"Invalid image URL provided in message content");return!1}return!0}function s(a,b,c){c=t(c);b=t(b);if(!a||!b)return c;b=b||c;return b?a+" - "+b:null}function t(a){__p&&__p();if(!a)return null;var c=b("ads-lib-urllib").getDomain(a);if(!c)return null;if(c&&c.toLowerCase()===j.M_ME_DOMAIN){a=a.substring(a.indexOf(j.M_ME_DOMAIN));a=a.split("?")[0];a=a.split("/");if(a.length>1){a=a[1];if(a!=="")return"@"+a.toLowerCase()}}return c}d={getTargetOrigin:a,validateMessageContentAndGetPreviewParams:c,isValidOrigin:n};e.exports=d}),null);
__d("FBExtension.HostAppTypes",["URI","isFacebookURI","isInstagramURI","isMessengerDotComURI","keyMirror","sdk.UA","BrowserExtensionsUtilities"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("keyMirror")({MESSENGER:null,INSTAGRAM:null,FACEBOOK:null,UNKNOWN:null}),h=b("BrowserExtensionsUtilities").getTargetOrigin;function i(a){if(!a)return g.UNKNOWN;else if(b("isFacebookURI")(a))return g.FACEBOOK;else if(b("isMessengerDotComURI")(a))return g.MESSENGER;else if(b("isInstagramURI")(a))return g.INSTAGRAM;return g.UNKNOWN}e.exports=babelHelpers["extends"]({},g,{getHostAppType:function(){__p&&__p();if(b("sdk.UA").mobile()){if(b("sdk.UA").facebookInAppBrowser())return g.FACEBOOK;else if(b("sdk.UA").instagram())return g.INSTAGRAM;else if(b("sdk.UA").messenger())return g.MESSENGER;return g.UNKNOWN}var a=h();return i(new(b("URI"))(a))}})}),null);
__d("BrowserExtensionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:BrowserExtensionsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:BrowserExtensionsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:BrowserExtensionsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAPIEndpoint=function(a){this.$1.api_endpoint=a;return this};c.setAppID=function(a){this.$1.appid=a;return this};c.setAppversion=function(a){this.$1.appversion=a;return this};c.setClientUserID=function(a){this.$1.client_userid=a;return this};c.setClienttime=function(a){this.$1.clienttime=a;return this};c.setCountry=function(a){this.$1.country=a;return this};c.setDeviceid=function(a){this.$1.deviceid=a;return this};c.setErrorCode=function(a){this.$1.error_code=a;return this};c.setErrorMessage=function(a){this.$1.error_message=a;return this};c.setExtraClientData=function(a){this.$1.extra_client_data=a;return this};c.setIsemployee=function(a){this.$1.isemployee=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setSessionid=function(a){this.$1.sessionid=a;return this};c.setStartURL=function(a){this.$1.start_url=a;return this};c.setStringPageID=function(a){this.$1.string_page_id=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setWebsiteURL=function(a){this.$1.website_url=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={api_endpoint:!0,appid:!0,appversion:!0,client_userid:!0,clienttime:!0,country:!0,deviceid:!0,error_code:!0,error_message:!0,extra_client_data:!0,isemployee:!0,name:!0,sessionid:!0,start_url:!0,string_page_id:!0,thread_id:!0,time:!0,website_url:!0,weight:!0};e.exports=a}),null);
__d("MessengerPlatformPostbackFailedDialog.react",["fbt","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogHeaderReact.re","MessengerDialogs.bs","MessengerDialogTitleReact.re","React"],(function(a,b,c,d,e,f,g){"use strict";var h=b("MessengerDialogBodyReact.bs").jsComponent,i=b("MessengerDialogHeaderReact.re").make,j=b("MessengerDialogTitleReact.re").make;function a(){return b("React").createElement(b("MessengerDialog.react"),{onToggle:function(a){a||b("MessengerDialogs.bs").removeDialog()}},b("React").createElement(i,null,b("React").createElement(j,null,g._("Action Unsuccessful"))),b("React").createElement(h,null,g._("There was an error delivering your message to the bot. Please try again later.")))}e.exports=a}),null);
__d("FantaPageComposerNullState.react",["cx","fbt","ChatPageComposerNullState.react","CurrentUser","FantaAppStore","MessengerDialogs.bs","MessengerDiscoveryEntryPoint","MessengerDiscoveryEntryPointsLoggingHelper","MessengerPlatformPostbackFailedDialog.react","MNCommerceCTAProcessor","MNCommercePostbackCTADataManager","MNCommercePostbackRefSendManager","React","getPageIDFromThreadID"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(){__p&&__p();var a=d.props,c=a.threadID;a=a.nullStateCTA;switch(a.action_type){case 1:break;case 4:default:var e=b("FantaAppStore").getState().tabGroup.tabs.get(c),f=[];e&&e.entryPoint&&e.entryPoint[0]&&Object.values(b("MessengerDiscoveryEntryPoint")).indexOf(e.entryPoint[0])!==-1&&f.push(b("MessengerDiscoveryEntryPointsLoggingHelper").getEntryPointsLoggingTagStr([e.entryPoint[0]]));b("MNCommercePostbackCTADataManager").sendAndConfirm(a.id,a.title,c,null,function(a){a.error&&b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("MessengerPlatformPostbackFailedDialog.react"),null)})},null,f);b("MNCommerceCTAProcessor").logCTAClick(a);break}},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"_2xh0"},this.$1(),b("React").createElement("div",{className:"_2xh4 _59w_"},b("React").createElement(b("ChatPageComposerNullState.react"),{cta:this.props.nullStateCTA,disabled:!1,onClick:this.$2,threadID:this.props.threadID})))};d.$1=function(){__p&&__p();if(this.props.nullStateCTA!==null)switch(this.props.nullStateCTA.action_type){case 1:return null;case 4:if(!b("MNCommercePostbackRefSendManager").hasMDotMeRef(b("getPageIDFromThreadID")(this.props.threadID))&&!this.props.nullStateCTA.instantgame_metadata&&!b("CurrentUser").isWorkUser()){var a=this.props.pageName?this.props.pageName:h._("Page");return b("React").createElement("div",{className:"_4teq"},h._("When you tap {cta title}, {name} will see your public info.",[h._param("cta title",this.props.nullStateCTA.title),h._param("name",a)]))}break;default:return null}return null};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MNCommerceBubbleImage.react",["cx","React","cssURL","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:b("joinClasses")("_4y9n"+(this.props.isSquare?" _2j_n":"")+(this.props.isSquare?"":" _2j_r"),this.props.className),style:{backgroundImage:b("cssURL")(this.props.source)}})};return c}(b("React").Component);c.propTypes={location:a.string,source:a.string.isRequired,width:a.number,isSquare:a.bool};e.exports=c}),null);
__d("MNCommercePromotionReactShapes",["React"],(function(a,b,c,d,e,f){"use strict";a=b("React").PropTypes;c=a.arrayOf(a.shape({action_link:a.string,title:a.string}));d={CallToActions:c,RetailItem:a.shape({call_to_actions:c,id:a.string,metalines:a.shape({metaline_1:a.string,metaline_2:a.string,metaline_3:a.string}),name:a.string,url:a.string,source:a.string})};e.exports=d}),null);
__d("BrowserExtensionsErrorHandler",["errorCode","errorDesc"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a={getExternalError:function(a){__p&&__p();switch(a){case 2018062:return{code:2018062,message:h._(function(a,b){return a._("The URL provided is not whitelisted for messenger extensions")},{})};case 2018067:return{code:2018067,message:h._(function(a,b){return a._("Pages using Messenger Extensions must use https and not include any port.")},{})};case 2018164:return{code:2018164,message:h._(function(a,b){return a._("Please pass in a valid app ID. The app must be subscribed to the page with pages messaging permission to call this api.")},{})};case 2018166:return{code:2018166,message:h._(function(a,b){return a._("Permission not valid to call the SDK API.")},{})};case 2018159:return{code:2018159,message:h._(function(a,b){return a._("Invalid payload were passed to the share flow.")},{})};case 2018160:return{code:2018160,message:h._(function(a,b){return a._("The provided open graph template is not supported.")},{})};case 2018161:return{code:2018161,message:h._(function(a,b){return a._("Open graph URL in the preview content does not match the one in share content.")},{})};case 2018053:return{code:2018053,message:h._(function(a,b){return a._("Element button title cannot be empty.")},{})};case 2018125:return{code:2018125,message:h._(function(a,b){return a._("Invalid URL button fields provided. Please check documentation for details.")},{})};case 2018041:return{code:2018041,message:h._(function(a,b){return a._("Web url cannot be empty for url type button")},{})};case 2018158:return{code:2018158,message:h._(function(a,b){return a._("There was a problem creating the share attachment. Please try again later.")},{})};case 2018142:return{code:2018142,message:h._(function(a,b){return a._("Beginshare parameters are not valid.")},{})};case 2018034:return{code:2018034,message:h._(function(a,b){return a._("Message cannot be empty, must provide valid attachment or text")},{})};case 2018167:return{code:2018167,message:h._(function(a,b){return a._("Another API operation is in progress.")},{})};case 2018012:return{code:2018012,message:h._(function(a,b){return a._("Unexpected internal error")},{})};case 2018162:return{code:2018162,message:h._(function(a,b){return a._("This feature is currently not available")},{})};case 2018154:default:return{code:2018154,message:h._(function(a,b){return a._("Messenger Extensions unexpected error.")},{})}}}};e.exports=a}),null);
__d("MessengerPlatformBeginShareMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1467034453348931"};b.getQueryID=function(){return"294980674291966"};return b}(b("WebGraphQLMutationBase"))}),null);
__d("BrowserExtensionsShareChatTabDialog.react",["cx","fbt","AbstractTextArea.react","AsyncRequest","BrowserExtensionsErrorHandler","CurrentUser","Image.react","MessengerComposeViewHeader.react","MessengerPlatformBeginShareMutationWebGraphQLMutation","MessengerTextWithEntities.react","React","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogHeader.react","XUIDialogHeaderTitle.react","XUISpinner.react","emptyFunction","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i="broadcast";c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isSending:!1,message:"",recipients:b("immutable").List()},d.$3=function(a){d.setState({recipients:d.state.recipients.push(a)})},d.$4=function(a){var b=d.state.recipients;d.setState({recipients:b["delete"](b.indexOf(a))})},d.$2=function(){d.setState({recipients:b("immutable").List()})},d.$6=function(){__p&&__p();d.setState({isSending:!0});var a=d.state.recipients.map(function(a){return a.getUniqueID()}).toArray();a=b("MessengerPlatformBeginShareMutationWebGraphQLMutation").getURI({content_for_preview:{button_url:d.props.buttonUrl,button_title:d.props.buttonTitle,image_url:d.props.imageUrl,item_url:d.props.itemUrl,open_graph_url:d.props.openGraphUrl,preview_type:d.props.previewType,subtitle:d.props.subtitle,target_display:d.props.targetDisplay,title:d.props.title,attachment_id:d.props.attachmentID,facebook_media_url:d.props.facebookMediaUrl,media_type:d.props.mediaType},content_for_share:d.props.contentForShare,message_text:d.state.message,page_id:d.props.pageID,thread_ids:d.props.sharingType===i?a:d.props.threadID,trigger:d.props.sharingType===i?"JS_BRIDGE_BROADCAST":"JS_BRIDGE_DIRECT"});new(b("AsyncRequest"))(a).setHandler(function(a){d.$1&&d.setState({isSending:!1});a=(a=a)!=null?(a=a.payload)!=null?(a=a.errors)!=null?a[0]:a:a:a;if(a){a=a?a.code:null;d.props.errorCallback(b("BrowserExtensionsErrorHandler").getExternalError(a))}else d.props.successCallback({is_sent:!0})}).send()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1=!0};d.componentWillUnmount=function(){this.$1=!1};d.render=function(){var a=this,c=this.props.sharingType===i?h._("Share"):h._("Send To Current Thread"),d=this.props.sharingType===i?this.state.recipients.size!==0:!0,e=this.props.sharingType===i?b("React").createElement(b("MessengerComposeViewHeader.react"),{className:"_189v",forceHideClearButton:!1,onClear:this.$2,onAddRecipient:this.$3,onRemoveRecipient:this.$4,onResize:b("emptyFunction"),recipients:this.state.recipients,viewer:b("CurrentUser").getID()}):null,f=this.props.sharingType===i?b("React").createElement("div",{className:"_4te6"},b("React").createElement(b("AbstractTextArea.react"),{autoFocus:!0,className:"_4te8",disabled:this.state.isSending,onChange:function(b){return a.setState({message:b.target.value})},placeholder:h._("Type a message..."),rows:2,value:this.state.message})):null,g=this.state.isSending?b("React").createElement(b("XUISpinner.react"),{size:"large"}):null,j=this.props.imageUrl?this.props.imageUrl:this.props.facebookMediaPreviewUrl;return b("React").createElement("div",null,b("React").createElement(b("XUIDialogHeader.react"),null,b("React").createElement(b("XUIDialogHeaderTitle.react"),null,c)),b("React").createElement(b("XUIDialogBody.react"),{className:"_189w"},e,f,b("React").createElement("div",{className:"_5l-3"},b("React").createElement("div",{className:"_4tea"},b("React").createElement(b("Image.react"),{src:j})),b("React").createElement("div",{className:"_4tef"},b("React").createElement("div",{style:{fontWeight:"bold"}},this.$5(this.props.title)),b("React").createElement("div",null,this.$5(this.props.subtitle)),b("React").createElement("div",null,this.$5(this.props.targetDisplay))))),b("React").createElement(b("XUIDialogFooter.react"),{leftContent:g},b("React").createElement(b("XUIDialogCancelButton.react"),null),b("React").createElement(b("XUIDialogButton.react"),{action:"confirm",disabled:this.state.isSending||!d,label:h._("Send"),onClick:this.$6,use:"default"})))};d.$5=function(a){return b("React").createElement(b("MessengerTextWithEntities.react"),{renderEmoji:!0,text:a||""})};return c}(b("React").Component);c.propTypes={buttonTitle:a.string,buttonUrl:a.string,contentForShare:a.string,imageUrl:a.string,itemUrl:a.string,openGraphUrl:a.string,facebookMediaUrl:a.string,facebookMediaPreviewUrl:a.string,attachmentID:a.string,mediaType:a.string,previewType:a.string,subtitle:a.string,targetDisplay:a.string,title:a.string,sharingType:a.string.isRequired,pageID:a.string.isRequired,threadID:a.string.isRequired,successCallback:a.func.isRequired,errorCallback:a.func.isRequired};e.exports=c}),null);
__d("BrowserExtensionsShareMessengerDialog.react",["cx","fbt","AbstractTextArea.react","AsyncRequest","BrowserExtensionsErrorHandler","CurrentUser","Image.react","LayerFadeOnHide","MessengerComposeViewHeader.react","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogFooter.react","MessengerDialogHeaderReact.re","MessengerDialogs.bs","MessengerDialogTitleReact.re","MessengerPlatformBeginShareMutationWebGraphQLMutation","MessengerSpinner.react","MessengerTextWithEntities.react","React","emptyFunction","immutable"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDialogBodyReact.bs").jsComponent,j=b("MessengerDialogHeaderReact.re").make,k=b("MessengerDialogTitleReact.re").make;a=b("React").PropTypes;var l="broadcast";c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={clickedSend:!1,isSending:!1,message:"",recipients:b("immutable").List()},d.$3=function(a){d.setState({recipients:d.state.recipients.push(a)})},d.$4=function(a){var b=d.state.recipients;d.setState({recipients:b["delete"](b.indexOf(a))})},d.$2=function(){d.setState({recipients:b("immutable").List()})},d.$7=function(){__p&&__p();d.setState({clickedSend:!0,isSending:!0});var a=d.state.recipients.map(function(a){return a.getUniqueID()}).toArray();a=b("MessengerPlatformBeginShareMutationWebGraphQLMutation").getURI({content_for_preview:{button_url:d.props.buttonUrl,button_title:d.props.buttonTitle,image_url:d.props.imageUrl,item_url:d.props.itemUrl,open_graph_url:d.props.openGraphUrl,preview_type:d.props.previewType,subtitle:d.props.subtitle,target_display:d.props.targetDisplay,title:d.props.title,attachment_id:d.props.attachmentID,facebook_media_url:d.props.facebookMediaUrl,media_type:d.props.mediaType},content_for_share:d.props.contentForShare,message_text:d.state.message,page_id:d.props.pageID,thread_ids:d.props.sharingType===l?a:d.props.threadID,trigger:d.props.sharingType===l?"JS_BRIDGE_BROADCAST":"JS_BRIDGE_DIRECT"});new(b("AsyncRequest"))(a).setHandler(function(a){d.$1&&d.setState({isSending:!1},function(){b("MessengerDialogs.bs").removeDialog()});a=(a=a)!=null?(a=a.payload)!=null?(a=a.errors)!=null?a[0]:a:a:a;if(a){a=a?a.code:null;d.props.errorCallback(b("BrowserExtensionsErrorHandler").getExternalError(a))}else d.props.successCallback({is_sent:!0})}).send()},d.$5=function(a){a||(d.state.clickedSend||d.props.successCallback({is_sent:!1}),b("MessengerDialogs.bs").removeDialog())},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1=!0};d.componentWillUnmount=function(){this.$1=!1};d.render=function(){var a=this,c=this.props.sharingType===l?h._("Share"):h._("Send To Current Thread"),d=this.props.sharingType===l?this.state.recipients.size!==0:!0,e=this.props.sharingType===l?b("React").createElement(b("MessengerComposeViewHeader.react"),{className:"_189v",forceHideClearButton:!1,onClear:this.$2,onAddRecipient:this.$3,onRemoveRecipient:this.$4,onResize:b("emptyFunction"),recipients:this.state.recipients,viewer:b("CurrentUser").getID()}):null,f=this.props.sharingType===l?b("React").createElement("div",{className:"_4te6"},b("React").createElement(b("AbstractTextArea.react"),{autoFocus:!0,className:"_4te8",disabled:this.state.isSending,onChange:function(b){return a.setState({message:b.target.value})},placeholder:h._("Type a message..."),rows:2,value:this.state.message})):null,g=this.state.isSending?b("React").createElement(b("MessengerSpinner.react"),null):null,m=this.props.imageUrl?this.props.imageUrl:this.props.facebookMediaPreviewUrl;return b("React").createElement(b("MessengerDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},hideOnEscape:!0,onToggle:this.$5,shown:!0,width:500},b("React").createElement(j,null,b("React").createElement(k,null,c)),b("React").createElement(i,{className:"_189w"},e,f,b("React").createElement("div",{className:"_5l-3"},b("React").createElement("div",{className:"_4tea"},b("React").createElement(b("Image.react"),{src:m})),b("React").createElement("div",{className:"_4tef"},b("React").createElement("div",{style:{fontWeight:"bold"}},this.$6(this.props.title)),b("React").createElement("div",null,this.$6(this.props.subtitle)),b("React").createElement("div",null,this.$6(this.props.targetDisplay))))),b("React").createElement(b("MessengerDialogFooter.react"),{leftContent:g},b("React").createElement(b("MessengerDialogCancelButton.react"),null),b("React").createElement(b("MessengerDialogButton.react"),{action:"confirm",disabled:this.state.isSending||!d,label:h._("Send"),onClick:this.$7,type:"primary"})))};d.$6=function(a){return b("React").createElement(b("MessengerTextWithEntities.react"),{renderEmoji:!0,text:a||""})};return c}(b("React").Component);c.propTypes={buttonTitle:a.string,buttonUrl:a.string,contentForShare:a.string,imageUrl:a.string,itemUrl:a.string,openGraphUrl:a.string,facebookMediaUrl:a.string,facebookMediaPreviewUrl:a.string,attachmentID:a.string,mediaType:a.string,previewType:a.string,subtitle:a.string,targetDisplay:a.string,title:a.string,sharingType:a.string.isRequired,pageID:a.string.isRequired,threadID:a.string.isRequired,successCallback:a.func.isRequired,errorCallback:a.func.isRequired};e.exports=c}),null);
__d("MessengerPlatformMediaAttachmentPreviewWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1480172682071484"};b.getQueryID=function(){return"1145458142265315"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("XShareScrapeAttachmentAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/message_share_attachment/fromURI/",{})}),null);
__d("BrowserExtensionsBeginShareHelper",["AsyncRequest","BrowserExtensionsErrorHandler","BrowserExtensionsShareChatTabDialog.react","BrowserExtensionsShareMessengerDialog.react","DialogX","LayerDestroyOnHide","LayerFadeOnHide","LayerHideOnBlur","MessengerDialogs.bs","MessengerEnvironment","MessengerPlatformMediaAttachmentPreviewWebGraphQLQuery","React","WebGraphQL","XShareScrapeAttachmentAsyncController","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="OPEN_GRAPH",h=150,i=150;function j(a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){__p&&__p();if(b("MessengerEnvironment").messengerui)b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("BrowserExtensionsShareMessengerDialog.react"),{buttonTitle:a,buttonUrl:c,contentForShare:d,imageUrl:e,itemUrl:f,openGraphUrl:g,facebookMediaUrl:h,facebookMediaPreviewUrl:i,attachmentID:j,mediaType:k,previewType:l,subtitle:m,targetDisplay:n,title:o,sharingType:p,pageID:q,threadID:r,successCallback:s,errorCallback:t})});else{var u={width:500,addedBehaviors:[b("LayerDestroyOnHide"),b("LayerFadeOnHide"),b("LayerHideOnBlur")]},v=b("React").createElement(b("BrowserExtensionsShareChatTabDialog.react"),{buttonTitle:a,buttonUrl:c,contentForShare:d,imageUrl:e,itemUrl:f,openGraphUrl:g,facebookMediaUrl:h,facebookMediaPreviewUrl:i,attachmentID:j,mediaType:k,previewType:l,subtitle:m,targetDisplay:n,title:o,sharingType:p,pageID:q,threadID:r,successCallback:s,errorCallback:t}),w=new(b("DialogX"))(u,v);w.subscribe("confirm",function(){w.hide()});w.subscribe("cancel",function(){s({is_sent:!1})});w.show()}}a={beginShareFlow:function(a,c,d,e,f,k,l){__p&&__p();if(f.preview_type===g){var m=b("XShareScrapeAttachmentAsyncController").getURIBuilder().getURI();new(b("AsyncRequest"))().setMethod("POST").setURI(m).setData({image_height:h,image_width:i,uri:f.open_graph_url}).setHandler(function(b){var g,h;h=(h=b)!=null?(h=h.payload)!=null?(h=h.media)!=null?h.image:h:h:h;g=(g=b)!=null?(g=g.payload)!=null?g.title:g:g;b=(b=b)!=null?(b=b.payload)!=null?(b=b.target)!=null?(b=b.artists)!=null?b[0]:b:b:b:b;j(f.button_title,f.button_url,e,h,f.item_url,f.open_graph_url,null,null,null,null,f.preview_type,b,f.target_display,g,d,a,c,k,l)}).send()}else!f.image_url?b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerPlatformMediaAttachmentPreviewWebGraphQLQuery"))({params:{attachment_id:f.attachment_id,page_id:a,url:f.facebook_media_url,media_type:f.media_type}})),function(b){b=b.messenger_platform_media_attachment_preview_info;j(f.button_title,f.button_url,e,null,f.item_url,f.open_graph_url,f.facebook_media_url,b.media_attachment.image.uri,f.attachment_id,f.media_type,f.preview_type,f.subtitle,f.target_display,f.title,d,a,c,k,l)},function(a){a=(a=a)!=null?(a=a.errors)!=null?(a=a[0])!=null?a.code:a:a:a;l(b("BrowserExtensionsErrorHandler").getExternalError(a))}):j(f.button_title,f.button_url,e,f.image_url,f.item_url,f.open_graph_url,f.facebook_media_url,null,f.attachment_id,f.media_type,f.preview_type,f.subtitle,f.target_display,f.title,d,a,c,k,l)}};e.exports=a}),null);
__d("MessengerPlatformGrantPermissionsMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1544630875548192"};b.getQueryID=function(){return"611085139087610"};return b}(b("WebGraphQLMutationBase"))}),null);
__d("MessengerPlatformPermissionWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1068951296538364"};b.getQueryID=function(){return"1526731417350771"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("BrowserExtensionsPermissionsHelper",["AsyncRequest","BrowserExtensionsAskPermissionsChatTabDialog.react","BrowserExtensionsAskPermissionsMessengerDialog.react","BrowserExtensionsErrorHandler","BrowserExtensionsTypedLogger","DialogX","LayerDestroyOnHide","LayerFadeOnHide","LayerHideOnBlur","MessengerDialogs.bs","MessengerEnvironment","MessengerPlatformGrantPermissionsMutationWebGraphQLMutation","MessengerPlatformPermissionWebGraphQLQuery","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a,c,d,e,f,g,h,i,j,k,l){__p&&__p();if(b("MessengerEnvironment").messengerui)b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("BrowserExtensionsAskPermissionsMessengerDialog.react"),{thirdPartyURI:a,pageID:c,threadID:d,message:e,profileImageUrl:f,confirmButtonTitle:g,rejectButtonTitle:h,permissionToGrant:i,grantedPermissions:j,successCallback:k,errorCallback:l})});else{var m={width:400,addedBehaviors:[b("LayerDestroyOnHide"),b("LayerFadeOnHide"),b("LayerHideOnBlur")]},n=b("React").createElement(b("BrowserExtensionsAskPermissionsChatTabDialog.react"),{thirdPartyURI:a,pageID:c,threadID:d,message:e,profileImageUrl:f,confirmButtonTitle:g,rejectButtonTitle:h,permissionToGrant:i,successCallback:k,errorCallback:l});m=new(b("DialogX"))(m,n);var o=!1;m.subscribe("confirm",function(){o=!0});m.subscribe("hide",function(){o||k({permissions:j})});m.show()}new(b("BrowserExtensionsTypedLogger"))().setAPIEndpoint("askPermission").setName("browser_extensions_permission_dialog_shown").setWebsiteURL(a.toString()).setStartURL(a.toString()).setStringPageID(c).setThreadID(d).log()}a={askPermissions:function(a,c,d,e,f,h){__p&&__p();var i=b("MessengerPlatformPermissionWebGraphQLQuery").getURI({params:{page_id:c,thread_id:d},selected_permissions:[e]});new(b("AsyncRequest"))().setURI(i).setHandler(function(i){__p&&__p();var j,k;k=(k=i)!=null?(k=k.payload)!=null?(k=k.data)!=null?(k=k.messenger_platform_permission)!=null?(k=k.selected_permission_infos)!=null?k[0]:k:k:k:k:k;j=(j=i)!=null?(j=j.payload)!=null?(j=j.data)!=null?(j=j.messenger_platform_permission)!=null?j.granted_permission_infos:j:j:j:j;i=(i=i)!=null?(i=i.payload)!=null?(i=i.errors)!=null?i[0]:i:i:i;if(!j){i=i?i.code:null;h(b("BrowserExtensionsErrorHandler").getExternalError(i))}else{i=j.map(function(a){return a.permission_type});if(!k||k.is_granted)f({permissions:i});else{j=k.dialog_info;g(a,c,d,j.title,j.profile_image.uri,j.confirm_button_text,j.reject_button_text,e,i,f,h)}}}).send()},grantPermissions:function(a,c,d,e,f){__p&&__p();a=b("MessengerPlatformGrantPermissionsMutationWebGraphQLMutation").getURI({page_id:a,thread_id:c,permissions:[d]});new(b("AsyncRequest"))().setURI(a).setHandler(function(a){__p&&__p();var c;c=(c=a)!=null?(c=c.payload)!=null?(c=c.data)!=null?(c=c.messenger_platform_grant_permissions)!=null?c.granted_permission_infos:c:c:c:c;a=(a=a)!=null?(a=a.payload)!=null?(a=a.errors)!=null?a[0]:a:a:a;if(c){c=c.map(function(a){return a.permission_type});e({permissions:c})}else{c=a?a.code:null;f(b("BrowserExtensionsErrorHandler").getExternalError(c))}}).send()}};e.exports=a}),null);
__d("BrowserExtensionsAskPermissionsChatTabDialog.react",["cx","BrowserExtensionsPermissionsHelper","BrowserExtensionsTypedLogger","Image.react","React","URI","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this;return b("React").createElement("div",null,b("React").createElement(b("XUIDialogBody.react"),null,b("React").createElement("div",null,b("React").createElement(b("Image.react"),{className:"_5_jw",src:this.props.profileImageUrl})),this.props.message),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",label:this.props.rejectButtonTitle,onClick:function(){a.$1(!1)}}),b("React").createElement(b("XUIDialogButton.react"),{action:"cancel",label:this.props.confirmButtonTitle,onClick:function(){a.$1(!0),b("BrowserExtensionsPermissionsHelper").grantPermissions(a.props.pageID,a.props.threadID,a.props.permissionToGrant,a.props.successCallback,a.props.errorCallback)},use:"confirm"})))};d.$1=function(a){new(b("BrowserExtensionsTypedLogger"))().setAPIEndpoint("askPermission").setExtraClientData(JSON.stringify({source:"platform_api",extension_type:"messenger_extension",permission_requested:this.props.permissionToGrant,permission_accepted:a})).setName("browser_extensions_permission_dialog_action").setWebsiteURL(this.props.thirdPartyURI.toString()).setStartURL(this.props.thirdPartyURI.toString()).setStringPageID(this.props.pageID).setThreadID(this.props.threadID).log()};return c}(b("React").Component);c.propTypes={thirdPartyURI:a.instanceOf(b("URI")).isRequired,pageID:a.string.isRequired,threadID:a.string.isRequired,message:a.string.isRequired,profileImageUrl:a.string.isRequired,confirmButtonTitle:a.string.isRequired,rejectButtonTitle:a.string.isRequired,permissionToGrant:a.string.isRequired,successCallback:a.func.isRequired,errorCallback:a.func.isRequired};e.exports=c}),null);
__d("BrowserExtensionsAskPermissionsMessengerDialog.react",["cx","BrowserExtensionsPermissionsHelper","BrowserExtensionsTypedLogger","Image.react","LayerFadeOnHide","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogFooter.react","MessengerDialogs.bs","React","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerDialogBodyReact.bs").jsComponent;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={clickedConfirm:!1},d.$1=function(a){a||(d.state.clickedConfirm||d.props.successCallback({permissions:d.props.grantedPermissions}),b("MessengerDialogs.bs").removeDialog())},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this;return b("React").createElement(b("MessengerDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},hideOnEscape:!0,onToggle:this.$1,shown:!0},b("React").createElement(h,null,b("React").createElement("div",null,b("React").createElement(b("Image.react"),{className:"_5_jw",src:this.props.profileImageUrl})),this.props.message),b("React").createElement(b("MessengerDialogFooter.react"),null,b("React").createElement(b("MessengerDialogCancelButton.react"),{label:this.props.rejectButtonTitle,onClick:function(){a.$2(!1)}}),b("React").createElement(b("MessengerDialogButton.react"),{action:"confirm",label:this.props.confirmButtonTitle,onClick:function(){a.setState({clickedConfirm:!0},function(){a.$2(!0),b("MessengerDialogs.bs").removeDialog(),b("BrowserExtensionsPermissionsHelper").grantPermissions(a.props.pageID,a.props.threadID,a.props.permissionToGrant,a.props.successCallback,a.props.errorCallback)})},type:"primary"})))};d.$2=function(a){new(b("BrowserExtensionsTypedLogger"))().setAPIEndpoint("askPermission").setExtraClientData(JSON.stringify({source:"platform_api",extension_type:"messenger_extension",permission_requested:this.props.permissionToGrant,permission_accepted:a})).setName("browser_extensions_permission_dialog_action").setWebsiteURL(this.props.thirdPartyURI.toString()).setStartURL(this.props.thirdPartyURI.toString()).setStringPageID(this.props.pageID).setThreadID(this.props.threadID).log()};return c}(b("React").Component);c.propTypes={thirdPartyURI:a.instanceOf(b("URI")).isRequired,pageID:a.string.isRequired,threadID:a.string.isRequired,message:a.string.isRequired,profileImageUrl:a.string.isRequired,confirmButtonTitle:a.string.isRequired,rejectButtonTitle:a.string.isRequired,permissionToGrant:a.string.isRequired,grantedPermissions:a.arrayOf(a.string).isRequired,successCallback:a.func.isRequired,errorCallback:a.func.isRequired};e.exports=c}),null);
__d("FBExtensionGetUserContextWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"2893904743956580"};b.getQueryID=function(){return"302740493759092"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("MessengerPlatformGetContextMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1350985785027565"};b.getQueryID=function(){return"182243942324918"};return b}(b("WebGraphQLMutationBase"))}),null);
__d("WorkChatPlatformGetContextMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1471152822996828"};b.getQueryID=function(){return"172454613443187"};return b}(b("WebGraphQLMutationBase"))}),null);
__d("BrowserExtensionsDesktopController",["errorCode","AsyncRequest","BrowserExtensionsBeginShareHelper","BrowserExtensionsErrorHandler","BrowserExtensionsPermissionsHelper","BrowserExtensionsTypedLogger","CurrentUser","DOMEventListener","FBExtension.HostAppTypes","FBExtensionGetUserContextWebGraphQLQuery","JSONRPC","MessengerPlatformGetContextMutationWebGraphQLMutation","MessengerPlatformPermissionWebGraphQLQuery","WorkChatPlatformGetContextMutationWebGraphQLMutation","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="MESSENGER_EXTENSIONS_RPC:";function i(a,c,d,e,f,g,h){__p&&__p();e=b("CurrentUser").isWorkUser()?b("WorkChatPlatformGetContextMutationWebGraphQLMutation").getURI({actor_id:e,app_id:f,page_id:c,thread_id:d,extension_uri:a.getOrigin()}):b("MessengerPlatformGetContextMutationWebGraphQLMutation").getURI({actor_id:e,app_id:f,page_id:c,thread_id:d,extension_uri:a.getOrigin()});new(b("AsyncRequest"))().setURI(e).setHandler(function(a){var c;c=(c=a)!=null?(c=c.payload)!=null?(c=c.data)!=null?c.messenger_platform_get_context:c:c:c;a=(a=a)!=null?(a=a.payload)!=null?(a=a.errors)!=null?a[0]:a:a:a;if(c)g(c);else{c=a?a.code:null;h(b("BrowserExtensionsErrorHandler").getExternalError(c))}}).send()}function j(a,c,d,e,f,g,h,i){__p&&__p();if(!b("gkx")("852437")){i(b("BrowserExtensionsErrorHandler").getExternalError(2018162));return}e={app_id:f,host_app:g,extension_uri:a.getOrigin()};g==="MESSENGER"&&(e=babelHelpers["extends"]({},e,{messenger_params:{page_id:c,thread_id:d}}));f=b("FBExtensionGetUserContextWebGraphQLQuery").getURI({input:e});new(b("AsyncRequest"))().setURI(f).setHandler(function(a){var c;c=(c=a)!=null?(c=c.payload)!=null?(c=c.data)!=null?(c=c.fb_extension_get_user_context)!=null?c.context:c:c:c:c;a=(a=a)!=null?(a=a.payload)!=null?(a=a.errors)!=null?a[0]:a:a:a;if(c)h({context:JSON.parse(c)});else{c=a?a.code:null;i(b("BrowserExtensionsErrorHandler").getExternalError(c))}}).send()}function k(a,c){if(!b("gkx")("850710")){c(b("BrowserExtensionsErrorHandler").getExternalError(2018162));return}c={host_app:b("FBExtension.HostAppTypes").getHostAppType().toLowerCase(),platform:"web"};a(c)}function l(a,c){if(!b("gkx")("852438")){c(b("BrowserExtensionsErrorHandler").getExternalError(2018162));return}c={version:0};a(c)}function m(a,c,d,e){__p&&__p();a=b("MessengerPlatformPermissionWebGraphQLQuery").getURI({params:{page_id:a,thread_id:c}});new(b("AsyncRequest"))().setURI(a).setHandler(function(a){__p&&__p();var c;c=(c=a)!=null?(c=c.payload)!=null?(c=c.data)!=null?(c=c.messenger_platform_permission)!=null?c.granted_permission_infos:c:c:c:c;a=(a=a)!=null?(a=a.payload)!=null?(a=a.errors)!=null?a[0]:a:a:a;if(c){c=c.map(function(a){return a.permission_type});d({permissions:c})}else{c=a?a.code:null;e(b("BrowserExtensionsErrorHandler").getExternalError(c))}}).send()}function n(a,b,c){a(b)}a=function(){__p&&__p();function a(a,c,d,e,f,g){__p&&__p();var o=new(b("JSONRPC"))(function(b){var d=a instanceof HTMLIFrameElement?a.contentWindow:a;d.postMessage(h+b,c.getOrigin())});this.$1=b("DOMEventListener").add(window,"message",function(a){if(typeof a.data!=="string"||!a.data.startsWith(h))return;o.read(a.data.substring(h.length))},!1);function p(a){new(b("BrowserExtensionsTypedLogger"))().setAPIEndpoint(a).setName("browser_extensions_native_bridge_called").setWebsiteURL(c.toString()).setStartURL(c.toString()).setStringPageID(d).setThreadID(e).log()}o.local.getEnvironment=function(a,b){p("getEnvironment"),k(a,b)};o.local.getVersion=function(a,b){p("getVersion"),l(a,b)};o.local.askPermission=function(a,f,g){if(b("CurrentUser").isWorkUser()){g(b("BrowserExtensionsErrorHandler").getExternalError(2018162));return}p("askPermission");b("BrowserExtensionsPermissionsHelper").askPermissions(c,d,e,a,f,g)};o.local.beginShareFlow=function(a,c,f,g,h){p("beginShareFlow"),b("BrowserExtensionsBeginShareHelper").beginShareFlow(d,e,a,c,f,g,h)};o.local.getContext=function(a,b,g){p("getContext"),i(c,d,e,f,a,b,g)};o.local.getUserContext=function(a,b,g,h){p("getUserContext"),j(c,d,e,f,a,b,g,h)};o.local.getGrantedPermissions=function(a,b){p("getGrantedPermissions"),m(d,e,a,b)};o.local.requestCloseBrowser=function(a,b){p("requestCloseBrowser"),n(g,a,b)}}var c=a.prototype;c.getListener=function(){return this.$1};return a}();e.exports=a}),null);
__d("BrowserExtensionsDesktopCoordinator",["BrowserExtensionsDesktopController"],(function(a,b,c,d,e,f){"use strict";var g;a={setActiveBridge:function(a,c,d,e,f,h){g&&g.remove();a=new(b("BrowserExtensionsDesktopController"))(a,c,d,e,f,h);g=a.getListener()}};e.exports=a}),null);
__d("BrowserExtensionsIframe.react",["BrowserExtensionsDesktopCoordinator","BrowserExtensionsTypedLogger","ControlledRefererIFrame.react","React","URI","isFacebookURI","isWorkplaceDotComURI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){this.refs.iframeRef&&(b("BrowserExtensionsDesktopCoordinator").setActiveBridge(this.refs.iframeRef,this.props.thirdPartyURI,this.props.pageID,this.props.threadID,this.props.userID,this.props.closeDialogHandler),new(b("BrowserExtensionsTypedLogger"))().setName("browser_extensions_browser_open").setWebsiteURL(this.props.thirdPartyURI.toString()).setStartURL(this.props.thirdPartyURI.toString()).setStringPageID(this.props.pageID).setThreadID(this.props.threadID).log())};d.componentWillUnmount=function(){new(b("BrowserExtensionsTypedLogger"))().setName("browser_extensions_browser_closed").setWebsiteURL(this.props.thirdPartyURI.toString()).setStartURL(this.props.thirdPartyURI.toString()).setStringPageID(this.props.pageID).setThreadID(this.props.threadID).log()};d.render=function(){var a=new(b("URI"))(window.location.href),c=this.props.thirdPartyURI,d="messenger_ref";b("isWorkplaceDotComURI")(a)&&(d="workplace_ref");b("isFacebookURI")(a)&&(d="facebook_ref");a={ref:"iframeRef",src:c.addQueryData("fb_iframe_origin",a.getOrigin()).toString(),name:d,style:{border:0,height:this.props.height,width:this.props.width}};return b("isFacebookURI")(c)?b("React").createElement("iframe",a):b("React").createElement(b("ControlledRefererIFrame.react"),a)};return c}(b("React").Component);c.propTypes={thirdPartyURI:a.instanceOf(b("URI")).isRequired,pageID:a.string.isRequired,threadID:a.string.isRequired,userID:a.string.isRequired,height:a.number.isRequired,width:a.number.isRequired,closeDialogHandler:a.func.isRequired};e.exports=c}),null);
__d("MessengerPageInfoWebGraphQLQuery",["WebGraphQLQueryBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1340699622714874"};b.getQueryID=function(){return"794225320759977"};return b}(b("WebGraphQLQueryBase"))}),null);
__d("BrowserExtensionsChatTabDialog.react",["cx","fbt","AsyncRequest","BrowserExtensionsIframe.react","Image.react","MessengerConstants","MessengerPageInfoWebGraphQLQuery","React","URI","XUICloseButton.react","XUIDialogBody.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("MessengerConstants").BROWSER_EXTENSIONS_DIALOG_DIMENSIONS;c=b("React").PropTypes;d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={profilePicUrl:null,title:null},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this,c=b("MessengerPageInfoWebGraphQLQuery").getURI({node_id:this.props.pageID});new(b("AsyncRequest"))().setURI(c).setHandler(function(b){var c;c=(c=b)!=null?(c=c.payload)!=null?(c=c.data)!=null?(c=c.node)!=null?(c=c.profile_picture)!=null?c.uri:c:c:c:c:c;b=(b=b)!=null?(b=b.payload)!=null?(b=b.data)!=null?(b=b.node)!=null?b.name:b:b:b:b;a.setState({profilePicUrl:c,title:b})}).send()};d.render=function(){return b("React").createElement("div",null,b("React").createElement("div",{className:"_4-i0"},b("React").createElement("div",{className:"_5l-3 _3qur"},b("React").createElement("div",{className:"_3o_f"},b("React").createElement(b("Image.react"),{className:"_3o_g",src:this.state.profilePicUrl})),b("React").createElement("div",{className:"_3o_i"},this.state.title),b("React").createElement("div",{className:"_3qus"},b("React").createElement(b("XUICloseButton.react"),{className:"layerCancel _51-t",label:h._("Close")})))),b("React").createElement(b("XUIDialogBody.react"),{className:"_3o_l"},b("React").createElement(b("BrowserExtensionsIframe.react"),{thirdPartyURI:this.props.thirdPartyURI,pageID:this.props.pageID,threadID:this.props.threadID,userID:this.props.userID,height:this.props.height,width:this.props.width,closeDialogHandler:this.props.closeDialogHandler})))};return c}(b("React").Component);d.defaultProps={height:a.HEIGHT,width:a.WIDTH};d.propTypes={thirdPartyURI:c.instanceOf(b("URI")).isRequired,pageID:c.string.isRequired,threadID:c.string.isRequired,userID:c.string.isRequired,height:c.number,width:c.number,closeDialogHandler:c.func.isRequired};e.exports=d}),null);
__d("BrowserExtensionsMessengerDialog.react",["cx","AsyncRequest","BrowserExtensionsIframe.react","Image.react","LayerFadeOnHide","MessengerConstants","MessengerDialog.react","MessengerDialogBodyReact.bs","MessengerDialogButton.react","MessengerDialogHeaderReact.re","MessengerDialogs.bs","MessengerPageInfoWebGraphQLQuery","React","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("MessengerConstants").BROWSER_EXTENSIONS_DIALOG_DIMENSIONS;var h=b("MessengerDialogBodyReact.bs").jsComponent,i=b("MessengerDialogHeaderReact.re").make;c=b("React").PropTypes;d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={profilePicUrl:null,title:null,shown:!0},c.$3=function(a){c.setState({shown:!1},a)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this,c=b("MessengerPageInfoWebGraphQLQuery").getURI({node_id:this.props.pageID});this.$1=new(b("AsyncRequest"))().setURI(c).setHandler(function(b){var c;c=(c=b)!=null?(c=c.payload)!=null?(c=c.data)!=null?(c=c.node)!=null?(c=c.profile_picture)!=null?c.uri:c:c:c:c:c;b=(b=b)!=null?(b=b.payload)!=null?(b=b.data)!=null?(b=b.node)!=null?b.name:b:b:b:b;a.setState({profilePicUrl:c,title:b})});this.$1.send()};d.componentWillUnmount=function(){this.$1&&this.$1.abandon()};d.render=function(){return b("React").createElement(b("MessengerDialog.react"),{behaviors:{LayerFadeOnHide:b("LayerFadeOnHide")},hideOnEscape:!0,onToggle:this.$2,shown:this.state.shown,type:"default",width:this.props.width},b("React").createElement(i,null,b("React").createElement("div",{className:"_5l-3 _3o_e"},b("React").createElement("div",{className:"_3o_f"},b("React").createElement(b("Image.react"),{className:"_3o_g",src:this.state.profilePicUrl})),b("React").createElement("div",{className:"_3o_i"},this.state.title),b("React").createElement("div",{className:"_3o_f"},b("React").createElement(b("MessengerDialogButton.react"),{action:"cancel",className:"_3o_k",label:"",type:"primary",use:"default"})))),b("React").createElement(h,{className:"_3o_l"},b("React").createElement(b("BrowserExtensionsIframe.react"),{thirdPartyURI:this.props.thirdPartyURI,pageID:this.props.pageID,threadID:this.props.threadID,userID:this.props.userID,height:this.props.height,width:this.props.width,closeDialogHandler:this.$3})))};d.$2=function(a){a||b("MessengerDialogs.bs").removeDialog()};return c}(b("React").Component);d.defaultProps={height:a.HEIGHT,width:a.WIDTH};d.propTypes={thirdPartyURI:c.instanceOf(b("URI")).isRequired,pageID:c.string.isRequired,threadID:c.string.isRequired,userID:c.string.isRequired,height:c.number,width:c.number};e.exports=d}),null);
__d("BrowserExtensionsDialog",["BrowserExtensionsChatTabDialog.react","BrowserExtensionsMessengerDialog.react","DialogX","LayerDestroyOnHide","LayerFadeOnHide","LayerHideOnBlur","MessengerConstants","MessengerDialogs.bs","MessengerEnvironment","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerConstants").BROWSER_EXTENSIONS_DIALOG_DIMENSIONS,h={show:function(a,c,d,e){if(b("MessengerEnvironment").messengerui)b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("BrowserExtensionsMessengerDialog.react"),{thirdPartyURI:a,pageID:c,threadID:d,userID:e})});else{var f,i={width:g.WIDTH,addedBehaviors:[b("LayerDestroyOnHide"),b("LayerFadeOnHide"),b("LayerHideOnBlur")]},j=b("React").createElement(b("BrowserExtensionsChatTabDialog.react"),{thirdPartyURI:a,pageID:c,threadID:d,userID:e,closeDialogHandler:function(a){return h.hideChatTabDialog(f,a)}});f=new(b("DialogX"))(i,j);f.show()}},hideChatTabDialog:function(a,b){a&&(a.hide(),b())}};e.exports=h}),null);
__d("FBPaymentsSerializableCheckoutConfigurationParser",["FBPaymentsContentConfigurationParser"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={parse:function(a,b){a=JSON.parse(a);return this._parseCheckoutConfiguration(a.checkout_configuration,!!b)},_parseCheckoutConfiguration:function(a,c){c={version:a.version,paymentInfo:this._parsePaymentInfo(a.payment_info),contentConfiguration:b("FBPaymentsContentConfigurationParser").parse(a.version,a.content_configuration,c),orderStatusModel:this._parseOrderStatusModel(a.order_status_model)};return c},_parsePaymentInfo:function(a){a={paymentItemType:a.payment_item_type,receiverId:a.receiver_id,orderId:a.order_id,action:a.action,extraData:a.extra_data};return a},_parseOrderStatusModel:function(a){a={type:a.type};return a}};e.exports=a}),null);